こちらのコードをとりあえず写経
http://coderecipe.jp/recipe/iHjJBJx9Si/